<!doctype html><html lang=es-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Procesamiento de imágenes # Gracias a la implementación de los shaders, el procesamiento de imágenes se hace más sencillo gracias a las herramientas que este lenguaje provee.
Mediante el uso de diferentes variables uniformes, se hace la implementación del magnificador o lupa para la imagen. Además se permite controlar la aplicación de un tipo de filtro seleccionado por el usuario el cual se implementa mediante la multiplicación con los elementos de la matriz de convolución."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Procesamiento de imágenes # Gracias a la implementación de los shaders, el procesamiento de imágenes se hace más sencillo gracias a las herramientas que este lenguaje provee.
Mediante el uso de diferentes variables uniformes, se hace la implementación del magnificador o lupa para la imagen. Además se permite controlar la aplicación de un tipo de filtro seleccionado por el usuario el cual se implementa mediante la multiplicación con los elementos de la matriz de convolución."><meta property="og:type" content="article"><meta property="og:url" content="https://angegonzalez.github.io/VisualComputing/docs/workshops/shaders/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2022-11-30T18:53:57-05:00"><title>Shaders | Visual Computing Notebook</title><link rel=manifest href=/VisualComputing/manifest.json><link rel=icon href=/VisualComputing/favicon.png type=image/x-icon><link rel=stylesheet href=/VisualComputing/book.min.ab46de3e725a6415339a37bba23a0067534a37289b063c9f8d011515a63097a8.css integrity="sha256-q0bePnJaZBUzmje7ojoAZ1NKNyibBjyfjQEVFaYwl6g=" crossorigin=anonymous><script defer src=/VisualComputing/flexsearch.min.js></script>
<script defer src=/VisualComputing/en.search.min.c50be311f88762c94b4834c9d6a9da598609dcfbe785603732187d27edf4dcc1.js integrity="sha256-xQvjEfiHYslLSDTJ1qnaWYYJ3PvnhWA3Mhh9J+303ME=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/VisualComputing/><span>Visual Computing Notebook</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/VisualComputing/docs/workshops/optical_illusions/>Optical Illusions</a></li><li><a href=/VisualComputing/docs/workshops/shaders/ class=active>Shaders</a></li><li><a href=/VisualComputing/docs/workshops/solar_system/>Solar System</a></li><li><a href=/VisualComputing/docs/workshops/visual_masking/>Visual Masking</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/VisualComputing/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Shaders</strong>
<label for=toc-control><img src=/VisualComputing/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#procesamiento-de-imágenes>Procesamiento de imágenes</a></li><li><a href=#imageprocessingjs><strong>imageProcessing.js</strong></a></li><li><a href=#imageprocessingfrag><strong>imageProcessing.frag</strong></a></li><li><a href=#photomosaic-and-pixelator>Photomosaic and pixelator</a></li><li><a href=#photomosaicfrag><strong>photoMosaic.frag</strong></a></li><li><a href=#photomosaicjs><strong>photoMosaic.js</strong></a></li><li><a href=#pixelator-implementado-en-software>Pixelator implementado en software</a></li><li><a href=#procedural-texturing>Procedural texturing</a></li><li><a href=#conclusiones>Conclusiones</a></li><li><a href=#referencias>Referencias</a></li></ul></nav></aside></header><article class=markdown><h1 id=procesamiento-de-imágenes>Procesamiento de imágenes
<a class=anchor href=#procesamiento-de-im%c3%a1genes>#</a></h1><p>Gracias a la implementación de los shaders, el procesamiento de imágenes se hace más sencillo gracias a las herramientas que este lenguaje provee.</p><p>Mediante el uso de diferentes variables uniformes, se hace la implementación del magnificador o lupa para la imagen. Además se permite controlar la aplicación de un tipo de filtro seleccionado por el usuario el cual se implementa mediante la multiplicación con los elementos de la matriz de convolución. El programa permite usar filtros como Blurring, Sharpen, Box Blur y Ridge Detection.</p><p>La aplicación también permite aplicar el luma en la imagen y sobre este se podrá hacer uso de la lupa e incluso aplicar filtros sobre esta.</p><iframe id=imageProcessing style=width:750px;height:625px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/addons/p5.sound.min.js></script>
             <script src=https://cdn.jsdelivr.net/gh/VisualComputing/p5.treegl/p5.treegl.js></script> 
            
            
            
            
            <script src=/VisualComputing/sketches/workshops/shaders/imageProcessing.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h1 id=imageprocessingjs><strong>imageProcessing.js</strong>
<a class=anchor href=#imageprocessingjs>#</a></h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>lumaShader</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>filtersShader</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>img</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>filter</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>mode</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>sharpen</span> <span style=color:#f92672>=</span> [<span style=color:#ae81ff>0</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>0</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>5</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>0</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>box_blur</span> <span style=color:#f92672>=</span> [<span style=color:#ae81ff>1</span><span style=color:#f92672>/</span><span style=color:#ae81ff>9</span>,<span style=color:#ae81ff>1</span><span style=color:#f92672>/</span><span style=color:#ae81ff>9</span>,<span style=color:#ae81ff>1</span><span style=color:#f92672>/</span><span style=color:#ae81ff>9</span>,<span style=color:#ae81ff>1</span><span style=color:#f92672>/</span><span style=color:#ae81ff>9</span>,<span style=color:#ae81ff>1</span><span style=color:#f92672>/</span><span style=color:#ae81ff>9</span>,<span style=color:#ae81ff>1</span><span style=color:#f92672>/</span><span style=color:#ae81ff>9</span>,<span style=color:#ae81ff>1</span><span style=color:#f92672>/</span><span style=color:#ae81ff>9</span>,<span style=color:#ae81ff>1</span><span style=color:#f92672>/</span><span style=color:#ae81ff>9</span>,<span style=color:#ae81ff>1</span><span style=color:#f92672>/</span><span style=color:#ae81ff>9</span>];
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>ridge_detection</span> <span style=color:#f92672>=</span> [<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>8</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>];
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>blurring</span> <span style=color:#f92672>=</span> [<span style=color:#ae81ff>1</span><span style=color:#f92672>/</span><span style=color:#ae81ff>16</span>,<span style=color:#ae81ff>2</span><span style=color:#f92672>/</span><span style=color:#ae81ff>16</span>,<span style=color:#ae81ff>1</span><span style=color:#f92672>/</span><span style=color:#ae81ff>16</span>,<span style=color:#ae81ff>2</span><span style=color:#f92672>/</span><span style=color:#ae81ff>16</span>,<span style=color:#ae81ff>4</span><span style=color:#f92672>/</span><span style=color:#ae81ff>16</span>,<span style=color:#ae81ff>2</span><span style=color:#f92672>/</span><span style=color:#ae81ff>16</span>,<span style=color:#ae81ff>1</span><span style=color:#f92672>/</span><span style=color:#ae81ff>16</span>,<span style=color:#ae81ff>2</span><span style=color:#f92672>/</span><span style=color:#ae81ff>16</span>,<span style=color:#ae81ff>1</span><span style=color:#f92672>/</span><span style=color:#ae81ff>16</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>preload</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>filtersShader</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>readShader</span>(<span style=color:#e6db74>&#39;/VisualComputing/sketches/workshops/shaders/shadersDef/imageProcessing.frag&#39;</span>,
</span></span><span style=display:flex><span>                        { <span style=color:#a6e22e>varyings</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>texcoords2</span> });
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>img</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadImage</span>(<span style=color:#e6db74>&#39;/VisualComputing/sketches/workshops/shaders/resources/fire_breathing.jpg&#39;</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>createCanvas</span>(<span style=color:#ae81ff>730</span>, <span style=color:#ae81ff>600</span>, <span style=color:#a6e22e>WEBGL</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>noStroke</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>textureMode</span>(<span style=color:#a6e22e>NORMAL</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>filtersShader</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>filter</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createCheckbox</span>(<span style=color:#e6db74>&#39;filter&#39;</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>magnifier</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createCheckbox</span>(<span style=color:#e6db74>&#39;magnifier&#39;</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>luma</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createCheckbox</span>(<span style=color:#e6db74>&#39;luma&#39;</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>filter</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>10</span>);  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>filter</span>.<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#39;color&#39;</span>, <span style=color:#e6db74>&#39;white&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>magnifier</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>30</span>);  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>magnifier</span>.<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#39;color&#39;</span>, <span style=color:#e6db74>&#39;white&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>luma</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>50</span>);  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>luma</span>.<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#39;color&#39;</span>, <span style=color:#e6db74>&#39;white&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mode</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSelect</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>85</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;blurring&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;sharpen&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;box_blur&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;ridge_detection&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;none&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>selected</span>(<span style=color:#e6db74>&#39;none&#39;</span>);
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>filter</span>.<span style=color:#a6e22e>input</span>(() =&gt; <span style=color:#a6e22e>filtersShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;withFilter&#39;</span>, <span style=color:#a6e22e>filter</span>.<span style=color:#a6e22e>checked</span>() ));
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>magnifier</span>.<span style=color:#a6e22e>input</span>(() =&gt; <span style=color:#a6e22e>filtersShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;withMagnifier&#39;</span>, <span style=color:#a6e22e>magnifier</span>.<span style=color:#a6e22e>checked</span>()));
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>luma</span>.<span style=color:#a6e22e>input</span>(() =&gt; <span style=color:#a6e22e>filtersShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;withLuma&#39;</span>, <span style=color:#a6e22e>luma</span>.<span style=color:#a6e22e>checked</span>()));
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>emitMousePosition</span>(<span style=color:#a6e22e>filtersShader</span>, [<span style=color:#a6e22e>uniform</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;u_mouse&#39;</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>filtersShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;texture&#39;</span>, <span style=color:#a6e22e>img</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>filtersShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;iResolution&#39;</span>,[<span style=color:#ae81ff>700</span>,<span style=color:#ae81ff>500</span>]);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>filtersShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;iResolution&#39;</span>,[<span style=color:#ae81ff>700</span>,<span style=color:#ae81ff>500</span>]);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>emitTexOffset</span>(<span style=color:#a6e22e>filtersShader</span>, <span style=color:#a6e22e>img</span>, [<span style=color:#e6db74>&#39;texOffset&#39;</span>])
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>background</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>filtersShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;u_mouse&#39;</span>, [<span style=color:#a6e22e>mouseX</span>, <span style=color:#a6e22e>mouseY</span>]);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>quad</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>value</span>()<span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;sharpen&#39;</span>){
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>filtersShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;mask1&#39;</span>, <span style=color:#a6e22e>sharpen</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>value</span>()<span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;blurring&#39;</span>){
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>filtersShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;mask1&#39;</span>, <span style=color:#a6e22e>blurring</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>value</span>()<span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;box_blur&#39;</span>){
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>filtersShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;mask1&#39;</span>, <span style=color:#a6e22e>box_blur</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>value</span>()<span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;ridge_detection&#39;</span>){
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>filtersShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;mask1&#39;</span>, <span style=color:#a6e22e>ridge_detection</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>filtersShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;mask1&#39;</span>, [<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>1</span>]);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=imageprocessingfrag><strong>imageProcessing.frag</strong>
<a class=anchor href=#imageprocessingfrag>#</a></h1><pre tabindex=0><code class=language-ghcl data-lang=ghcl>
precision mediump float;

uniform sampler2D texture;
// see the emitTexOffset() treegl macro
// https://github.com/VisualComputing/p5.treegl#macros
uniform bool withFilter;
uniform bool withMagnifier;
uniform bool withLuma;
uniform vec2 texOffset;
// holds the 3x3 kernel
uniform float mask1[9];
uniform float mask2[9];
uniform float mask3[9];
uniform float mask4[9];

// we need our interpolated tex coord
varying vec2 texcoords2;

//magnifier
uniform vec3 iResolution;// viewport resolution (in pixels)
uniform float iTime;// shader playback time (in seconds)
uniform float iTimeDelta;// render time (in seconds)
uniform float iFrameRate;// shader frame rate
uniform int iFrame;// shader playback frame
uniform float iChannelTime[4];// channel playback time (in seconds)
uniform vec3 iChannelResolution[4];// channel resolution (in pixels)
uniform vec2 u_mouse;// mouse pixel coords. xy: current (if MLB down), zw: click
uniform vec4 iDate;// (year, month, day, time in seconds)
uniform float iSampleRate;


float luma(vec3 texel) {
  return 0.299 * texel.r + 0.587 * texel.g + 0.114 * texel.b;
}


void main(){
    // 1. Use offset to move along texture space.
    // In this case to find the texcoords of the texel neighbours.
    vec2 tc0=texcoords2+vec2(-texOffset.s,-texOffset.t);
    vec2 tc1=texcoords2+vec2(0.,-texOffset.t);
    vec2 tc2=texcoords2+vec2(+texOffset.s,-texOffset.t);
    vec2 tc3=texcoords2+vec2(-texOffset.s,0.);
    // origin (current fragment texcoords)
    vec2 tc4=texcoords2+vec2(0.,0.);
    vec2 tc5=texcoords2+vec2(+texOffset.s,0.);
    vec2 tc6=texcoords2+vec2(-texOffset.s,+texOffset.t);
    vec2 tc7=texcoords2+vec2(0.,+texOffset.t);
    vec2 tc8=texcoords2+vec2(+texOffset.s,+texOffset.t);
    
    // 2. Sample texel neighbours within the rgba array
    vec4 rgba[9];
    rgba[0]=texture2D(texture,tc0);
    rgba[1]=texture2D(texture,tc1);
    rgba[2]=texture2D(texture,tc2);
    rgba[3]=texture2D(texture,tc3);
    rgba[4]=texture2D(texture,tc4);
    rgba[5]=texture2D(texture,tc5);
    rgba[6]=texture2D(texture,tc6);
    rgba[7]=texture2D(texture,tc7);
    rgba[8]=texture2D(texture,tc8);
    
    // 3. Apply convolution kernel
    vec4 convolution;
    for(int i=0;i&lt;9;i++){
        convolution+=rgba[i]*mask1[i];
    }
    
    vec2 uv = texcoords2.xy;
    vec2 mouse = u_mouse.xy;
    
    if(mouse == vec2(0.0))
        mouse = iResolution.xy/2.0;
    
    //UV coordinates of mouse
    vec2 mouse_uv = mouse/iResolution.xy;
    
    //Distance to mouse
    float mouse_dist = distance(uv,mouse_uv);
    
    //Draw the texture
    
    vec4 texel = texture2D(texture,texcoords2);

    vec4 filter = vec4(convolution.rgb,1.0);
    
    if(mouse_dist&lt;.21)
        texel = withMagnifier ? vec4(0.1, 0.1, 0.1, 1.0): texel ; 

    if(mouse_dist&lt;.2)
        texel =  withMagnifier ?  texture2D(texture,(uv+mouse_uv)/2.0)*(convolution.rgb,1.0) : texel;

    if(mouse_dist&lt;.21)
        texel = withFilter ? vec4(0.1, 0.1, 0.1, 1.0): texel; 

    if(mouse_dist&lt;.2)
        texel =  withFilter ?  filter : texel;  

    if(mouse_dist&lt;.2)
        texel =  withLuma ?  vec4((vec3(luma(texel.rgb))), 1.0) : texel;

    gl_FragColor = texel;

}
</code></pre><h1 id=photomosaic-and-pixelator>Photomosaic and pixelator
<a class=anchor href=#photomosaic-and-pixelator>#</a></h1><iframe id=photoMosaic style=width:750px;height:625px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/addons/p5.sound.min.js></script>
             <script src=https://cdn.jsdelivr.net/gh/VisualComputing/p5.treegl/p5.treegl.js></script> 
             <script src=https://cdn.jsdelivr.net/gh/objetos/p5.quadrille.js/p5.quadrille.min.js></script> 
            
            
            
            <script src=/VisualComputing/sketches/workshops/shaders/photoMosaic.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h1 id=photomosaicfrag><strong>photoMosaic.frag</strong>
<a class=anchor href=#photomosaicfrag>#</a></h1><pre tabindex=0><code class=language-ghcl data-lang=ghcl>
precision mediump float;

// source (image or video) is sent by the sketch
uniform sampler2D source;
uniform sampler2D luma1;
uniform sampler2D luma2;
uniform sampler2D luma3;
uniform sampler2D luma4;
uniform sampler2D luma5;
uniform sampler2D luma6;
uniform sampler2D luma7;
uniform sampler2D luma8;
uniform sampler2D luma9;
uniform sampler2D luma10;

// displays original
uniform bool original;
uniform bool keys;
// target horizontal &amp; vertical resolution
uniform float resolution;

// interpolated texcoord (same name and type as in vertex shader)
// defined as a (normalized) vec2 in [0..1]
varying vec2 texcoords2;

const vec4 lumcoeff = vec4(0.299, 0.587, 0.114, 0);

void main() {
  if (original) {
    gl_FragColor = texture2D(source, texcoords2);
  }
  else {
    vec2 symbolCoord = texcoords2 * resolution;
    vec2 stepCoord = floor(symbolCoord);
    
    symbolCoord = symbolCoord - stepCoord;
    stepCoord = stepCoord / vec2(resolution);
    vec4 key = texture2D(source, stepCoord);

    float luma = dot(key, lumcoeff);
    vec4 paletteTexel;

    //symbolCoord.x = 0.8;
    
    if (luma &gt;= 0.0 &amp;&amp; luma &lt; 0.1){
      paletteTexel = texture2D(luma1, symbolCoord);
    }
    else if (luma &gt;= 0.1 &amp;&amp; luma &lt; 0.2){
      paletteTexel = texture2D(luma2, symbolCoord);
    }
    else if (luma &gt;= 0.2 &amp;&amp; luma &lt; 0.3){
      paletteTexel = texture2D(luma3, symbolCoord);
    }
    else if (luma &gt;= 0.3 &amp;&amp; luma &lt; 0.4){
      paletteTexel = texture2D(luma4, symbolCoord);
    }
    else if (luma &gt;= 0.4 &amp;&amp; luma &lt; 0.5){
      paletteTexel = texture2D(luma5, symbolCoord);
    }
    else if (luma &gt;= 0.5 &amp;&amp; luma &lt; 0.6){
      paletteTexel = texture2D(luma6, symbolCoord);
    }
    else if (luma &gt;= 0.6 &amp;&amp; luma &lt; 0.7){
      paletteTexel = texture2D(luma7, symbolCoord);
    }
    else if (luma &gt;= 0.7 &amp;&amp; luma &lt; 0.8){
      paletteTexel = texture2D(luma8, symbolCoord);
    }
    else if (luma &gt;= 0.8 &amp;&amp; luma &lt; 0.9){
      paletteTexel = texture2D(luma9, symbolCoord);
    }
    else if (luma &gt;= 0.9 &amp;&amp; luma &lt; 1.0){
      paletteTexel = texture2D(luma10, symbolCoord);
    }
    else{
      paletteTexel = texture2D(source, stepCoord);
    }

    gl_FragColor = keys ? key : paletteTexel;
  }
}
</code></pre><h1 id=photomosaicjs><strong>photoMosaic.js</strong>
<a class=anchor href=#photomosaicjs>#</a></h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>    <span style=color:#e6db74>&#39;use strict&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>image_src</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>video</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>mosaic</span>;
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ui
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>resolution</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>mode</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>keys</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>paintings</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>camera</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>imagesQuadrille</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>imagesBuffer</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>preload</span>() {
</span></span><span style=display:flex><span>      <span style=color:#75715e>// paintings are stored locally in the /sketches/shaders/paintings dir
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#75715e>// and named sequentially as: p1.jpg, p2.jpg, ... p30.jpg
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#75715e>// so we pick up one randomly just for fun:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>paintings</span> <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>31</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>){
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>paintings</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>loadImage</span>(<span style=color:#e6db74>`/VisualComputing/sketches/assets/paintings/ImgurImgDump0.</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>i</span><span style=color:#e6db74>}</span><span style=color:#e6db74>.jpg`</span>));
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>mosaic</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>readShader</span>(<span style=color:#e6db74>&#39;/VisualComputing/sketches/workshops/shaders/shadersDef/photoMosaic.frag&#39;</span>,
</span></span><span style=display:flex><span>              { <span style=color:#a6e22e>matrices</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>NONE</span>, <span style=color:#a6e22e>varyings</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>texcoords2</span> });
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>createCanvas</span>(<span style=color:#ae81ff>750</span>, <span style=color:#ae81ff>625</span>, <span style=color:#a6e22e>WEBGL</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>textureMode</span>(<span style=color:#a6e22e>NORMAL</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>noStroke</span>();
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>mosaic</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>resolution</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSlider</span>(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>30</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>resolution</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>35</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>resolution</span>.<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#39;width&#39;</span>, <span style=color:#e6db74>&#39;80px&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>resolution</span>.<span style=color:#a6e22e>input</span>(() =&gt; <span style=color:#a6e22e>mosaic</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;resolution&#39;</span>, <span style=color:#a6e22e>resolution</span>.<span style=color:#a6e22e>value</span>()));
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>mosaic</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;resolution&#39;</span>, <span style=color:#a6e22e>resolution</span>.<span style=color:#a6e22e>value</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>keys</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createCheckbox</span>(<span style=color:#e6db74>&#39;keys&#39;</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>keys</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>90</span>);  
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>keys</span>.<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#39;color&#39;</span>, <span style=color:#e6db74>&#39;white&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>keys</span>.<span style=color:#a6e22e>input</span>(() =&gt; <span style=color:#a6e22e>mosaic</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;keys&#39;</span>, <span style=color:#a6e22e>keys</span>.<span style=color:#a6e22e>checked</span>() ));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>mode</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSelect</span>();
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>75</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;original&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;pixelator&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>selected</span>(<span style=color:#e6db74>&#39;pixelator&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>changed</span>(() =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>mosaic</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;original&#39;</span>, <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;original&#39;</span>);
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>// image_select = createSelect();
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#75715e>// image_select.position(10, 100);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#75715e>// for(let i = 0; i &lt;= 30; i++){
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#75715e>//   image_select.option(`${i}`);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#75715e>// }
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>// image_select.selected(&#34;0&#34;)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>video</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createCapture</span>(<span style=color:#a6e22e>VIDEO</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>video</span>.<span style=color:#a6e22e>size</span>(<span style=color:#ae81ff>640</span>, <span style=color:#ae81ff>480</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>video</span>.<span style=color:#a6e22e>hide</span>();
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>camera</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createCheckbox</span>(<span style=color:#e6db74>&#39;camera&#39;</span>, <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>camera</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>140</span>);  
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>camera</span>.<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#39;color&#39;</span>, <span style=color:#e6db74>&#39;white&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>camera</span>.<span style=color:#a6e22e>changed</span>(()=&gt; <span style=color:#a6e22e>camera</span> <span style=color:#f92672>=</span> <span style=color:#f92672>!</span><span style=color:#a6e22e>camera</span>)
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>      <span style=color:#75715e>// paintings.forEach((image)=&gt;{
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#75715e>//   image.loadPixels();
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#75715e>// })
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>image_src</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>paintings</span>[<span style=color:#ae81ff>10</span>]
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>imagesQuadrille</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createQuadrille</span>(<span style=color:#a6e22e>paintings</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>imagesQuadrille</span>.<span style=color:#a6e22e>sort</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>// imagesBuffer = createGraphics(300,70);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>// drawQuadrille(imagesQuadrille, {graphics: imagesBuffer, outlineWeight: 0});
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>// image.changed(() =&gt; {
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#75715e>//   image_src = paintings[image.value()]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#75715e>// });
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>camera</span>){
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>mosaic</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;source&#39;</span>, <span style=color:#a6e22e>video</span>);
</span></span><span style=display:flex><span>        <span style=color:#75715e>//mosaic.setUniform(&#39;palette&#39;, video);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      }
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>mosaic</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;source&#39;</span>, <span style=color:#a6e22e>image_src</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>10</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>){
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>mosaic</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>`luma</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>i</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>, <span style=color:#a6e22e>imagesQuadrille</span>.<span style=color:#a6e22e>_memory2D</span>[<span style=color:#ae81ff>0</span>][<span style=color:#a6e22e>i</span>]);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>beginShape</span>();
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>vertex</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>vertex</span>(<span style=color:#ae81ff>1</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>vertex</span>(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>vertex</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>endShape</span>();
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div><p>El pixelator usa los conceptos de coherencia espacial para comprimir y de alguna manera bajar la resolucion en un texel.
Aqui aplicamos el concepto a mas de 30 imagenes y dejamos planteada la base para la construccion de un fotomosaico, pero por tiempo, no se pudo desarrollar completamente.</p><h1 id=pixelator-implementado-en-software>Pixelator implementado en software
<a class=anchor href=#pixelator-implementado-en-software>#</a></h1><iframe id=pixelatorSoftware style=width:750px;height:625px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/addons/p5.sound.min.js></script>
            
            
            
            
            
            <script src=/VisualComputing/sketches/workshops/shaders/pixelatorSoftware.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h1 id=procedural-texturing>Procedural texturing
<a class=anchor href=#procedural-texturing>#</a></h1><iframe id=truchet style=width:750px;height:625px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/addons/p5.sound.min.js></script>
             <script src=https://cdn.jsdelivr.net/gh/VisualComputing/p5.treegl/p5.treegl.js></script> 
            
            
            
            
            <script src=/VisualComputing/sketches/workshops/shaders/truchet.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><p>La meta en procedural texturing es generar una textura usando un algoritmo en el que se pueda mapear el resultado a una figura como una textura. En el precedural texturing requerimos objeto de bufer (en p5 seria un objeto de tipo <code>p5.Graphics</code>)</p><p>Aqui aplicamos un algoritmo para generar las figuras y luego pintarlas como una textura al clindro</p><h1 id=conclusiones>Conclusiones
<a class=anchor href=#conclusiones>#</a></h1><p>En general, el uso de shaders resulta ser una solución práctica para la generación de todo tipo de gráficos y su procesamiento. Alrededor de la implementación para la entrega se percibió que el uso de Shaders puede ser tan sencillo como se desee, pero también tan complejo como se desee.</p><p>La aplicación de shaders para este curso es solo un abrebocas para todas las aplicaciones que estas puedan desarrollar, el conocimiento que se quiera desarrollar más allá de lo visto en clase debe ser estudiado e implementado.</p><h1 id=referencias>Referencias
<a class=anchor href=#referencias>#</a></h1><ul><li><a href=https://en.wikipedia.org/wiki/Kernel_%28image_processing%29>Kernel in image processing</a></li><li><a href=https://setosa.io/ev/image-kernels/>Different image kernel & convolutions</a></li><li><a href=https://visualcomputing.github.io/docs/shaders/image_processing/>Image processing with shaders</a></li><li><a href=https://visualcomputing.github.io/docs/shaders/photomosaic/>Photomosaic implementation</a></li><li><a href=https://visualcomputing.github.io/docs/shaders/procedural_texturing/>Procedural texturing</a></li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/angegonzalez/VisualComputing/commit/1c36537a089e15eaf9aeda3b8bd8410811b6db99 title='Last modified by Angel Mateo Gonzalez | November 30, 2022' target=_blank rel=noopener><img src=/VisualComputing/svg/calendar.svg class=book-icon alt=Calendar>
<span>November 30, 2022</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#procesamiento-de-imágenes>Procesamiento de imágenes</a></li><li><a href=#imageprocessingjs><strong>imageProcessing.js</strong></a></li><li><a href=#imageprocessingfrag><strong>imageProcessing.frag</strong></a></li><li><a href=#photomosaic-and-pixelator>Photomosaic and pixelator</a></li><li><a href=#photomosaicfrag><strong>photoMosaic.frag</strong></a></li><li><a href=#photomosaicjs><strong>photoMosaic.js</strong></a></li><li><a href=#pixelator-implementado-en-software>Pixelator implementado en software</a></li><li><a href=#procedural-texturing>Procedural texturing</a></li><li><a href=#conclusiones>Conclusiones</a></li><li><a href=#referencias>Referencias</a></li></ul></nav></div></aside></main></body></html>